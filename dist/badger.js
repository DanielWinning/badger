(()=>{"use strict";var e={947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentHandler=void 0;var r=n(774),o=n(698),a=function(){function e(t,n){var r=this;if(this.commandOptions=[],this.flags=[],void 0!==e.argumentHandler)throw new Error("Only a single instance of ArgumentHandler is expected.");n&&n.forEach((function(e){r.commandOptions.push(e)})),this.setupCommandOptions(),this.parseArguments(t);var o=this.flags.find((function(e){return"readme"===e.commandOption.getName()}));void 0!==o&&(this.readmePath=o.value),e.argumentHandler=this}return e.prototype.setupCommandOptions=function(){this.commandOptions.push(new r.CommandOption("jest",!1,!0)),this.commandOptions.push(new r.CommandOption("readme",!1,!0)),this.commandOptions.push(new r.CommandOption("version",!1,!0))},e.prototype.parseArguments=function(e){var t=this;e.splice(0,2);for(var n=function(t){if(e[t].startsWith("--")){var n=e[t].slice(2),a=r.commandOptions.find((function(e){return e.getName()===n}));if(!a)throw new Error(o.Messages.ERROR_UNKNOWN_FLAG.replace("%s",n));if(a.requiresValue()){if(t+1<e.length&&!e[t+1].startsWith("--"))return r.addFlag(n,e[t+1],a),"continue";throw new Error(o.Messages.ERROR_MISSING_ARGUMENT_VALUE.replace("%s",n))}r.addFlag(n,null,a)}},r=this,a=0;a<e.length;a++)n(a);this.commandOptions.forEach((function(e){if(e.isOptionRequired()&&!t.flags.find((function(t){return t.name===e.getName()})))throw new Error(o.Messages.ERROR_MISSING_REQUIRED_FLAG.replace("%s",e.getName()))}))},e.prototype.addFlag=function(e,t,n){this.flags.push({name:e,value:t,commandOption:n})},e.prototype.getFlags=function(){return this.flags},e}();t.ArgumentHandler=a},520:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeGenerator=void 0;var c=a(n(147)),s=n(947),l=n(698),f=function(){function e(){}return e.prototype.setupData=function(e,t,n,r){return void 0===n&&(n=!1),i(this,void 0,void 0,(function(){var o=this;return u(this,(function(a){return[2,new Promise((function(a,i){o.commandOption=t,o.commandOption.requiresValue()&&!r&&i(l.Messages.ERROR_MISSING_ARGUMENT_VALUE.replace("%s",o.commandOption.getName())),o.configPath=r,o.data=o.getJsonDataFromFilepath(o.configPath),o.name=e,o.isPercentage=n,a(!0)}))]}))}))},e.prototype.generateBadgeURL=function(e,t){return"https://img.shields.io/badge/".concat(this.name,"-").concat(e).concat(this.isPercentage?"%25":"","-").concat(t)},e.prototype.generateHTMLBadge=function(e,t){var n=this.generateBadgeURL(e,t);return'<img src="'.concat(n,'" alt="').concat(this.name," ").concat(e).concat(this.isPercentage?"%":"",'">')},e.prototype.getJsonDataFromFilepath=function(e){try{return JSON.parse(c.readFileSync(e,"utf-8"))}catch(t){throw new Error(l.Messages.ERROR_READING_FROM_FILEPATH.replace("%s",e))}},e.prototype.updateReadmeWithBadge=function(e){return i(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){return[2,new Promise((function(n,r){var o,a=void 0!==(null===(o=s.ArgumentHandler.argumentHandler)||void 0===o?void 0:o.readmePath)?s.ArgumentHandler.argumentHandler.readmePath:"./README.md";c.readFile(a,"utf8",(function(o,i){if(o)r(o);else{var u=new RegExp("\x3c!-- ".concat(t.name," Badge --\x3e\\s*<img [^>]*>"));if(u.test(i)){var c=i.replace(u,"\x3c!-- ".concat(t.name," Badge --\x3e\n").concat(e));t.updateReadmeFile(a,c),n("".concat(t.name," Badge added to README."))}else c=i.replace("\x3c!-- ".concat(t.name," Badge --\x3e"),"\x3c!-- ".concat(t.name," Badge --\x3e\n").concat(e)),t.updateReadmeFile(a,c),n("".concat(t.name," Badge added to README."))}}))}))]}))}))},e.prototype.updateReadmeFile=function(e,t){c.writeFile(e,t,"utf8",(function(e){if(e)throw new Error("Error writing to README file: ".concat(e))}))},e.prototype.getStatusFromPercentageString=function(e){var t=parseFloat(e);return t>=90?"green":t>=80?"yellow":t>=70?"orange":"red"},e}();t.BadgeGenerator=f},774:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandOption=void 0;var n=function(){function e(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.valueRequired=!1,this.isRequired=!1,this.name=e,this.isRequired=t,this.valueRequired=n}return e.prototype.getName=function(){return this.name},e.prototype.isOptionRequired=function(){return this.isRequired},e.prototype.requiresValue=function(){return this.valueRequired},e}();t.CommandOption=n},514:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleColor=void 0,function(e){e.Reset="[0m",e.Bright="[1m",e.Dim="[2m",e.Underscore="[4m",e.Blink="[5m",e.Reverse="[7m",e.Hidden="[8m",e.FgBlack="[30m",e.FgRed="[31m",e.FgGreen="[32m",e.FgYellow="[33m",e.FgBlue="[34m",e.FgMagenta="[35m",e.FgCyan="[36m",e.FgWhite="[37m",e.BgBlack="[40m",e.BgRed="[41m",e.BgGreen="[42m",e.BgYellow="[43m",e.BgBlue="[44m",e.BgMagenta="[45m",e.BgCyan="[46m",e.BgWhite="[47m"}(n||(t.ConsoleColor=n={}))},698:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0,function(e){e.ERROR_MISSING_REQUIRED_FLAG="Please provide the --%s flag",e.ERROR_MISSING_ARGUMENT_VALUE="The --%s flag requires a value",e.ERROR_UNKNOWN_FLAG="Unknown flag: --%s",e.ERROR_READING_FROM_FILEPATH="Error reading from the specified file %s",e.ERROR_READING_README="Error reading README file."}(n||(t.Messages=n={}))},103:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JestCoverageGenerator=void 0;var u=n(520),c=n(698),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getName=function(){return"Coverage"},t.prototype.generate=function(e,t){return a(this,void 0,void 0,(function(){var n=this;return i(this,(function(r){return[2,new Promise((function(r,o){n.setupData(n.getName(),e,!0,t).then((function(){var e=n.getFileCoveragePercentages(),t=n.getTotalCoverage(e),a=n.getStatusFromPercentageString(t),i=n.generateHTMLBadge(t,a);n.updateReadmeWithBadge(i).then((function(e){r(e)})).catch((function(){o("Error: ".concat(c.Messages.ERROR_READING_README))}))})).catch((function(e){return o(e)}))}))]}))}))},t.prototype.getFileCoveragePercentages=function(){var e=[];for(var t in this.data){var n=this.data[t];e.push(this.calculateCoverageMetric(n.s)),e.push(this.calculateCoverageMetric(n.f))}return e},t.prototype.calculateCoverageMetric=function(e){var t=Object.keys(e).length;return(Object.values(e).filter((function(e){return e>0})).length/t*100).toFixed(2)},t.prototype.getTotalCoverage=function(e){var t=e.length,n=e.reduce((function(e,t){return(Number(e)+Number(t)).toString()}));return(Number(n)/t).toFixed(2)},t}(u.BadgeGenerator);t.JestCoverageGenerator=s},919:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VersionGenerator=void 0;var u=n(520),c=n(698),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getName=function(){return"Version"},t.prototype.generate=function(e,t){return a(this,void 0,void 0,(function(){var n=this;return i(this,(function(r){return[2,new Promise((function(r,o){n.setupData(n.getName(),e,!1,t).then((function(){var e;n.updateReadmeWithBadge(n.generateHTMLBadge(null!==(e=n.data.version)&&void 0!==e?e:"N/A","blue")).then((function(e){r(e)})).catch((function(){o(c.Messages.ERROR_READING_README)}))})).catch((function(e){return o(e)}))}))]}))}))},t}(u.BadgeGenerator);t.VersionGenerator=s},607:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(947),i=n(514),u=n(103),c=n(919);try{new a.ArgumentHandler(process.argv)}catch(e){console.error("".concat(i.ConsoleColor.FgRed).concat(e).concat(i.ConsoleColor.Reset)),process.exit()}var s={jest:new u.JestCoverageGenerator,version:new c.VersionGenerator};a.ArgumentHandler.argumentHandler.getFlags().forEach((function(e){return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return(t=s[e.name])?[4,t.generate(e.commandOption,e.value).then((function(e){console.log("".concat(i.ConsoleColor.FgGreen).concat(e).concat(i.ConsoleColor.Reset))})).catch((function(e){console.error("".concat(i.ConsoleColor.FgRed).concat(e).concat(i.ConsoleColor.Reset))}))]:[2];case 1:return n.sent(),[2]}}))}))}))},147:e=>{e.exports=require("fs")}},t={},n=function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}(607);module.exports=n})();