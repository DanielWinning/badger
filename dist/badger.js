(()=>{"use strict";var e={947:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentHandler=void 0;var n=r(774),o=r(698),a=function(){function e(t,r){var n=this;if(this.commandOptions=[],this.flags=[],void 0!==e.argumentHandler)throw new Error("Only a single instance of ArgumentHandler is expected.");r&&r.forEach((function(e){n.commandOptions.push(e)})),this.setupCommandOptions(),this.parseArguments(t);var o=this.flags.find((function(e){return"readme"===e.commandOption.getName()}));void 0!==o&&(this.readmePath=o.value),e.argumentHandler=this}return e.prototype.setupCommandOptions=function(){this.commandOptions.push(new n.CommandOption("jest",!1,!0)),this.commandOptions.push(new n.CommandOption("readme",!1,!0)),this.commandOptions.push(new n.CommandOption("version",!1,!0))},e.prototype.parseArguments=function(e){var t=this;e.splice(0,2);for(var r=function(t){if(e[t].startsWith("--")){var r=e[t].slice(2),a=n.commandOptions.find((function(e){return e.getName()===r}));if(!a)throw new Error(o.Messages.ERROR_UNKNOWN_FLAG.replace("%s",r));if(a.requiresValue()){if(t+1<e.length&&!e[t+1].startsWith("--"))return n.addFlag(r,e[t+1],a),"continue";throw new Error(o.Messages.ERROR_MISSING_ARGUMENT_VALUE.replace("%s",r))}n.addFlag(r,null,a)}},n=this,a=0;a<e.length;a++)r(a);this.commandOptions.forEach((function(e){if(e.isOptionRequired()&&!t.flags.find((function(t){return t.name===e.getName()})))throw new Error(o.Messages.ERROR_MISSING_REQUIRED_FLAG.replace("%s",e.getName()))}))},e.prototype.addFlag=function(e,t,r){this.flags.push({name:e,value:t,commandOption:r})},e.prototype.getFlags=function(){return this.flags},e}();t.ArgumentHandler=a},520:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeGenerator=void 0;var i=a(r(147)),s=r(947),u=function(){function e(){}return e.prototype.setupData=function(e,t,r,n){if(void 0===r&&(r=!1),this.commandOption=t,this.commandOption.requiresValue()&&!n)throw new Error("The --".concat(this.commandOption.getName()," requires an argument."));this.configPath=n,this.data=this.getJsonDataFromFilepath(this.configPath),this.name=e,this.isPercentage=r},e.prototype.generateBadgeURL=function(e,t){return"https://img.shields.io/badge/".concat(this.name,"-").concat(e).concat(this.isPercentage?"%25":"","-").concat(t)},e.prototype.generateHTMLBadge=function(e,t){var r=this.generateBadgeURL(e,t);return'<img src="'.concat(r,'" alt="').concat(this.name," ").concat(e).concat(this.isPercentage?"%":"",'">')},e.prototype.getJsonDataFromFilepath=function(e){try{return JSON.parse(i.readFileSync(e,"utf-8"))}catch(e){throw new Error("Error reading the config file.")}},e.prototype.updateReadmeWithBadge=function(e){var t,r=this,n=void 0!==(null===(t=s.ArgumentHandler.argumentHandler)||void 0===t?void 0:t.readmePath)?s.ArgumentHandler.argumentHandler.readmePath:"./README.md";i.readFile(n,"utf8",(function(t,o){if(t)throw new Error("Error reading file ".concat(t));var a=new RegExp("\x3c!-- ".concat(r.name," Badge --\x3e\\s*<img [^>]*>"));if(a.test(o)){var i=o.replace(a,"\x3c!-- ".concat(r.name," Badge --\x3e\n").concat(e));r.updateReadmeFile(n,i)}else i=o.replace("\x3c!-- ".concat(r.name," Badge --\x3e"),"\x3c!-- ".concat(r.name," Badge --\x3e\n").concat(e)),r.updateReadmeFile(n,i)})),console.log("".concat(this.name," Badge added to README."))},e.prototype.updateReadmeFile=function(e,t){i.writeFile(e,t,"utf8",(function(e){if(e)throw new Error("Error writing to README file: ".concat(e))}))},e}();t.BadgeGenerator=u},774:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandOption=void 0;var r=function(){function e(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this.valueRequired=!1,this.isRequired=!1,this.name=e,this.isRequired=t,this.valueRequired=r}return e.prototype.getName=function(){return this.name},e.prototype.isOptionRequired=function(){return this.isRequired},e.prototype.requiresValue=function(){return this.valueRequired},e}();t.CommandOption=r},698:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0,function(e){e.ERROR_MISSING_REQUIRED_FLAG="Please provide the %s flag",e.ERROR_MISSING_ARGUMENT_VALUE="The %s flag requires a value",e.ERROR_UNKNOWN_FLAG="Unknown flag: --%s"}(r||(t.Messages=r={}))},103:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.JestCoverageGenerator=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getName=function(){return"Coverage"},t.prototype.generate=function(e,t){this.setupData(this.getName(),e,!0,t);var r=this.getFileCoveragePercentages(),n=this.getTotalCoverage(r),o=this.getCoverageStatus(n),a=this.generateHTMLBadge(n,o);this.updateReadmeWithBadge(a)},t.prototype.getFileCoveragePercentages=function(){var e=[];for(var t in this.data){var r=this.data[t];e.push(this.calculateCoverageMetric(r.s)),e.push(this.calculateCoverageMetric(r.f))}return e},t.prototype.calculateCoverageMetric=function(e){var t=Object.keys(e).length;return(Object.values(e).filter((function(e){return e>0})).length/t*100).toFixed(2)},t.prototype.getTotalCoverage=function(e){var t=e.length,r=e.reduce((function(e,t){return(Number(e)+Number(t)).toString()}));return(Number(r)/t).toFixed(2)},t.prototype.getCoverageStatus=function(e){var t=parseFloat(e);return t>=90?"green":t>=80?"yellow":"red"},t}(r(520).BadgeGenerator);t.JestCoverageGenerator=a},919:function(e,t,r){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VersionGenerator=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getName=function(){return"Version"},t.prototype.generate=function(e,t){var r;this.setupData(this.getName(),e,!1,t),this.updateReadmeWithBadge(this.generateHTMLBadge(null!==(r=this.data.version)&&void 0!==r?r:"N/A","blue"))},t}(r(520).BadgeGenerator);t.VersionGenerator=a},147:e=>{e.exports=require("fs")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0});var t=r(947),o=r(103),a=r(919);new t.ArgumentHandler(process.argv);var i={jest:new o.JestCoverageGenerator,version:new a.VersionGenerator};t.ArgumentHandler.argumentHandler.getFlags().forEach((function(e){var t=i[e.name];t&&t.generate(e.commandOption,e.value)}))})(),module.exports=n})();